define("app/router",["require"],function(e){var t=Backbone.Router.extend({routes:{"*action":"defaultAction"}});return t.prototype.initialize=function(e){Backbone.Router.prototype.initialize.call(this,e),this.app=e.app||console.error("app must be passed!")},t.prototype.defaultAction=function(t){var n=this;n.app.page&&(n.app.page.undelegateEvents(),n.app.page.$el.html('<i class="icon-spin icon-spinner"></i> Loading...'),n.app.trigger("page-closed"));var r=t.split("/"),i=r[0]||"index",s=r[1]||"index",o={};if(r.length>2){var u;for(u=2;u<r.length;u+=2)o[r[u]]=r[u+1]}var a=n.app.baseUrl+"pages/"+i+"/"+s;e([a],function(e){n.app.page=new e({el:n.app.layout.mainPanel,app:n.app}),n.app.page.render(),n.app.trigger("page-rendered",n.app.page)})},t.prototype.start=function(){Backbone.history.start()},t});